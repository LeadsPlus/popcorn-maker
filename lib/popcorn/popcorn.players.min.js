(function(j,f){Popcorn.baseplayer=function(){return new Popcorn.baseplayer.init};Popcorn.baseplayer.init=function(){this.currentTime=this.readyState=0;this.baselineTime=new Date;this.duration=0;this.paused=1;this.ended=0;this.volume=1;this.muted=0;this.playbackRate=1;this.loop=this.autoplay=null;this._events={};this._container=this._resource=null;this.offsetTop=this.offsetLeft=this.offsetHeight=this.height=this.offsetWidth=this.width=0;this.offsetParent=null};Popcorn.baseplayer.init.prototype={load:function(){},
play:function(){this.paused=0;this.timeupdate()},pause:function(){this.paused=1},timeupdate:function(){var h=this;if(!this.paused){this.currentTime+=(new Date-this.baselineTime)/1E3;this.dispatchEvent("timeupdate")}this.baselineTime=new Date;setTimeout(function(){h.timeupdate.call(h)},50)},getBoundingClientRect:function(){return Popcorn.position(this._resource||this._container)},addEventListener:function(h,p){this._events[h]||(this._events[h]=[]);this._events[h].push(p);return p},dispatchEvent:function(h){var p,
g=this,m=h.type;if(!m){m=h;if(h=Popcorn.events.getInterface(m)){p=document.createEvent(h);p.initEvent(m,true,true,window,1)}}Popcorn.forEach(this._events[m],function(n){n.call(g,p,g)})},extractContainerValues:function(h){if(this._container=document.getElementById(h)){h=this._container.getBoundingClientRect();this.offsetWidth=this.width=this.getStyle("width")||0;this.offsetHeight=this.height=this.getStyle("height")||0;this.offsetLeft=h.left;this.offsetTop=h.top;this.offsetParent=this._container.offsetParent;
return this._container}},getStyle:function(h){var p=this._resource||this._container;return p.currentStyle?p.currentStyle[h]:j.getComputedStyle?f.defaultView.getComputedStyle(p,null).getPropertyValue(h):p.style[h]}}})(window,document);var onYouTubePlayerReady=function(j){onYouTubePlayerReady[j]&&onYouTubePlayerReady[j]()};onYouTubePlayerReady.stateChangeEventHandler={};
Popcorn.player("youtube",{_setup:function(j){var f=this,h,p=document.createElement("div"),g=0,m=0,n=false,k=false,e=0;p.id=f.id+Popcorn.guid();f.appendChild(p);var b=function(){var a,d,c;onYouTubePlayerReady[p.id]=function(){h=document.getElementById(p.id);onYouTubePlayerReady.stateChangeEventHandler[p.id]=function(l){if(l===1)f.paused&&f.play();else if(l===2)if(n&&m===g&&m!==h.getCurrentTime()){n=false;h.seekTo(g)}else{g=h.getCurrentTime();f.dispatchEvent("timeupdate");!f.paused&&f.pause()}};h.addEventListener("onStateChange",
"onYouTubePlayerReady.stateChangeEventHandler."+p.id);var i=function(){if(!f.paused){g=h.getCurrentTime();f.dispatchEvent("timeupdate");setTimeout(i,10)}},o=function(){if(k!==h.isMuted()){k=h.isMuted();f.dispatchEvent("volumechange")}if(e!==h.getVolume()){e=h.getVolume();f.dispatchEvent("volumechange")}setTimeout(o,250)};f.play=function(){f.paused=false;f.dispatchEvent("play");f.dispatchEvent("playing");i();h.playVideo()};f.pause=function(){if(!f.paused){f.paused=true;f.dispatchEvent("pause");h.pauseVideo()}};
Popcorn.player.defineProperty(f,"currentTime",{set:function(l){g=m=+l;n=true;f.dispatchEvent("seeked");f.dispatchEvent("timeupdate");h.seekTo(g);return g},get:function(){return g}});Popcorn.player.defineProperty(f,"muted",{set:function(l){if(h.isMuted()!==l){l?h.mute():h.unMute();k=h.isMuted();f.dispatchEvent("volumechange")}return h.isMuted()},get:function(){return h.isMuted()}});Popcorn.player.defineProperty(f,"volume",{set:function(l){if(h.getVolume()!==l){h.setVolume(l);e=h.getVolume();f.dispatchEvent("volumechange")}return h.getVolume()},
get:function(){return h.getVolume()}});f.readyState=4;f.dispatchEvent("load");f.duration=h.getDuration();f.dispatchEvent("durationchange");o();f.dispatchEvent("loadeddata")};j.controls=+j.controls===0||+j.controls===1?j.controls:1;j.annotations=+j.annotations===1||+j.annotations===3?j.annotations:1;a={playerapiid:p.id,controls:j.controls,iv_load_policy:j.annotations};d={id:p.id};c=/^.*[\/=](.{11})/.exec(f.src)[1];swfobject.embedSWF("http://www.youtube.com/e/"+c+"?enablejsapi=1&playerapiid="+p.id+
"&version=3",p.id,f.offsetWidth,f.offsetHeight,"8",null,a,{wmode:"transparent",allowScriptAccess:"always"},d)};window.swfobject?b():Popcorn.getScript("http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js",b)}});(function(j){var f=Math.abs,h={},p=function(g){function m(k){if(!n[k]){n[k]=[];this["on"+k]=function(e){j.forEach(n[k],function(b){b&&b.call(g,e)})}}}var n={};return{addEventListener:function(k,e,b){k=k.toLowerCase();m.call(this,k);n[k].push(e);b&&dispatchEvent(k);return e},addEventListeners:function(k,e){k=k.toLowerCase();m.call(this,k);n[k]=n[k].concat(e)},removeEventListener:function(k,e){var b=this.getEventListeners(k),a,d;a=0;for(d=b.length;a<d;a++)if(b[a]===e){d=b[a];b[a]=0;return d}},getEventListeners:function(k){return k?
n[k.toLowerCase()]||[]:n},dispatchEvent:function(k,e){k="on"+k.toString().toLowerCase();this[k]&&this[k](e)}}};j.vimeo=function(g,m,n){return new j.vimeo.init(g,m,n)};j.vimeo.onLoad=function(g){var m=h[g];m.swfObj=document.getElementById(g);m.offsetWidth=m.swfObj.offsetWidth;m.offsetHeight=m.swfObj.offsetHeight;m.offsetParent=m.swfObj.offsetParent;m.offsetLeft=m.swfObj.offsetLeft;m.offsetTop=m.swfObj.offsetTop;m.dispatchEvent("load")};j.getScript("http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js");
j.vimeo.init=function(){function g(b){if(b)return(b=b.match(k))?b[0].substr(30):""}function m(b){if(b)return(b=b.match(e))?b[0].substr(10):""}function n(b,a,d){window.swfobject?swfobject.embedSWF("http://vimeo.com/moogaloop.swf",d,b.offsetWidth,b.offsetHeight,"9.0.0","expressInstall.swf",{clip_id:a,show_portrait:1,show_byline:1,show_title:1,js_api:1,js_onLoad:"Popcorn.vimeo.onLoad",js_swf_id:d},{allowscriptaccess:"always",allowfullscreen:"true",wmode:"transparent"},{}):setTimeout(function(){n(b,a,
d)},1)}var k=/^http:\/\/player\.vimeo\.com\/video\/[\d]+/i,e=/vimeo\.com\/[\d]+/;return function(b,a,d){if(b){if(/file/.test(location.protocol))throw"Must run from a web server!";}else throw"Must supply an id!";var c=this;this._container=document.createElement("div");this._container.id=b+"object";this._target=document.getElementById(b);this._target.appendChild(this._container);d=d||{};d.css&&j.extend(this._target.style,d.css);this.evtHolder=this.addEventFn=null;this.paused=true;this.duration=Number.MAX_VALUE;
this.currentTime=this.ended=0;this.volume=1;this.readyState=this.played=this.initialTime=this.loop=0;this.parentNode=this._target.parentNode;this.previousCurrentTime=this.currentTime;this.previousVolume=this.volume;this.evtHolder=new p(this);this.width=this._target.style.width||"504px";this.height=this._target.style.height||"340px";if(/[\d]%/.test(this.width)){b=this._target.style.width;this._target.style.width=this.width;this.offsetWidth=this._target.offsetWidth;this._target.style.width=b}else{this.offsetWidth=
parseInt(this.width,10);this._target.style.width=this.width+"px"}if(/[\d]%/.test(this.height)){b=this._target.style.height;this._target.style.height=this.height;this.offsetHeight=this._target.offsetHeight;this._target.style.height=b}else{this.offsetHeight=parseInt(this.height,10);this._target.style.height=this.height+"px"}this.offsetTop=this.offsetLeft=0;a=m(a)||g(a);if(!a)throw"No video id";h[this._container.id]=this;n(this,a,this._container.id);this.addEventListener("load",function(){var i=false;
c.duration=c.swfObj.api_getDuration();c.evtHolder.dispatchEvent("durationchange");c.evtHolder.dispatchEvent("loadedmetadata");c.addEventListener("timeupdate",function(){c.currentTime=c.swfObj.api_getCurrentTime()});c.addEventListener("pause",function(){c.paused=true});c.addEventListener("playing",function(){c.paused=false;c.ended=0});c.addEventListener("ended",function(){if(c.loop!=="loop"){c.paused=true;c.ended=1}});c.addEventListener("progress",function(o){if(!i){i=1;c.readyState=3;c.evtHolder.dispatchEvent("readystatechange")}if(o.percent===
100){c.readyState=4;c.evtHolder.dispatchEvent("readystatechange");c.evtHolder.dispatchEvent("canplaythrough")}})})}}();j.vimeo.init.prototype=j.vimeo.prototype;j.extend(j.vimeo.prototype,{setLoop:function(g){if(g){this.loop=g;this.swfObj.api_setLoop(g==="loop"?1:0)}},setVolume:function(g){if(!(!g&&g!==0)){if(g<0)g=-g;if(g>1)g%=1;this.volume=this.previousVolume=g;this.swfObj.api_setVolume(g*100);this.evtHolder.dispatchEvent("volumechange")}},setCurrentTime:function(g){if(!(!g&&g!==0)){this.currentTime=
this.previousCurrentTime=g;this.ended=g>=this.duration;this.swfObj.api_seekTo(g);this.evtHolder.dispatchEvent("seeked");this.evtHolder.dispatchEvent("timeupdate")}},play:function(){if(this.swfObj){if(!this.played){this.played=1;this.startTimeUpdater();this.evtHolder.dispatchEvent("loadstart")}this.evtHolder.dispatchEvent("play");this.swfObj.api_play()}else this.addEventListener("load",this.play)},pause:function(){this.swfObj?this.swfObj.api_pause():this.addEventListener("load",this.pause)},mute:function(){if(this.swfObj)if(this.muted())if(this.paused)this.setVolume(this.oldVol);
else this.volume=this.oldVol;else{this.oldVol=this.volume;if(this.paused)this.setVolume(0);else this.volume=0}else this.addEventListener("load",this.mute)},muted:function(){return this.volume===0},load:function(){if(this.swfObj){this.play();this.pause()}else this.addEventListener("load",this.load)},unload:function(){if(this.swfObj){this.pause();this.swfObj.api_unload();this.evtHolder.dispatchEvent("abort");this.evtHolder.dispatchEvent("emptied")}else this.addEventListener("load",this.unload)},addEventListener:function(g,
m){var n;g=g.type||g.toLowerCase();if(g==="seeked")n="onSeek";else if(g==="timeupdate")n="onProgress";else if(g==="progress")n="onLoading";else if(g==="ended")n="onFinish";else if(g==="playing")n="onPlay";else if(g==="pause")n="on"+g[0].toUpperCase()+g.substr(1);this.evtHolder.addEventListener(g,m,false);if(n&&this.evtHolder.getEventListeners(g).length===1){j.vimeo[n]=n==="onSeek"||n==="onProgress"||n==="onLoading"?function(k,e){h[e].evtHolder.dispatchEvent(g,k)}:function(k){h[k].evtHolder.dispatchEvent(g)};
this.swfObj.api_addEventListener(n,"Popcorn.vimeo."+n)}},removeEventListener:function(g,m){return this.evtHolder.removeEventListener(g,m)},dispatchEvent:function(g){return this.evtHolder.dispatchEvent(g)},getBoundingClientRect:function(){return this._target.getBoundingClientRect()},startTimeUpdater:function(){var g=this,m=0;if(f(this.currentTime-this.previousCurrentTime)>0.75){this.setCurrentTime(this.currentTime);m=1}else this.previousCurrentTime=this.currentTime;this.volume!==this.previousVolume&&
this.setVolume(this.volume);if(!g.paused||m)this.dispatchEvent("timeupdate");g.ended||setTimeout(function(){g.startTimeUpdater.call(g)},33)}})})(Popcorn,window);(function(j,f){var h=j.document,p=j.location,g=/:\/\//,m=p.href.replace(p.href.split("/").slice(-1)[0],""),n=function(e,b,a){e=e||0;b=(b||e||0)+1;a=a||1;b=Math.ceil((b-e)/a)||0;var d=0,c=[];for(c.length=b;d<b;){c[d++]=e;e+=a}return c};f.sequence=function(e,b){return new f.sequence.init(e,b)};f.sequence.init=function(e,b){this.parent=h.getElementById(e);this.seqId=f.guid("__sequenced");this.queue=[];this.playlist=[];this.inOuts={ofVideos:[],ofClips:[]};this.dims={width:0,height:0};this.active=0;this.playing=
this.cycling=false;this.times={last:0};this.events={};var a=this,d=0;f.forEach(b,function(c,i){var o=h.createElement("video");o.preload="auto";o.controls=true;o.style.display=i&&"none"||"";o.id=a.seqId+"-"+i;a.queue.push(o);var l=c["in"],q=c.out;a.inOuts.ofVideos.push({"in":l!==undefined&&l||1,out:q!==undefined&&q||0});a.inOuts.ofVideos[i].out=a.inOuts.ofVideos[i].out||a.inOuts.ofVideos[i]["in"]+2;o.src=!g.test(c.src)?m+c.src:c.src;o.setAttribute("data-sequence-owner",e);o.setAttribute("data-sequence-guid",
a.seqId);o.setAttribute("data-sequence-id",i);o.setAttribute("data-sequence-clip",[a.inOuts.ofVideos[i]["in"],a.inOuts.ofVideos[i].out].join(":"));a.parent.appendChild(o);a.playlist.push(f("#"+o.id))});a.inOuts.ofVideos.forEach(function(c){c={"in":d,out:d+(c.out-c["in"])};a.inOuts.ofClips.push(c);d=c.out+1});f.forEach(this.queue,function(c,i){function o(){if(!i){a.dims.width=c.videoWidth;a.dims.height=c.videoHeight}c.currentTime=a.inOuts.ofVideos[i]["in"]-0.5;c.removeEventListener("canplaythrough",
o,false);return true}c.addEventListener("canplaythrough",o,false);c.addEventListener("play",function(){a.playing=true},false);c.addEventListener("pause",function(){a.playing=false},false);c.addEventListener("timeupdate",function(l){l=l.srcElement||l.target;l=+(l.dataset&&l.dataset.sequenceId||l.getAttribute("data-sequence-id"));var q=Math.floor(c.currentTime);if(a.times.last!==q&&l===a.active){a.times.last=q;q===a.inOuts.ofVideos[l].out&&f.sequence.cycle.call(a,l)}},false)});return this};f.sequence.init.prototype=
f.sequence.prototype;f.sequence.cycle=function(e){this.queue||f.error("Popcorn.sequence.cycle is not a public method");var b=this.queue,a=this.inOuts.ofVideos,d=b[e],c=0,i;if(b[e+1])c=e+1;if(b[e+1]){b=b[c];a=a[c];f.extend(b,{width:this.dims.width,height:this.dims.height});i=this.playlist[c];d.pause();this.active=c;this.times.last=a["in"]-1;i.currentTime(a["in"]);i[c?"play":"pause"]();this.trigger("cycle",{position:{previous:e,current:c}});if(c){d.style.display="none";b.style.display=""}this.cycling=
false}else this.playlist[e].pause();return this};var k=["timeupdate","play","pause"];f.extend(f.sequence.prototype,{eq:function(e){return this.playlist[e]},remove:function(){this.parent.innerHTML=null},clip:function(e){return this.inOuts.ofVideos[e]},duration:function(){for(var e=0,b=this.inOuts.ofClips,a=0;a<b.length;a++)e+=b[a].out-b[a]["in"]+1;return e-1},play:function(){this.playlist[this.active].play();return this},exec:function(e,b){var a=this.active;this.inOuts.ofClips.forEach(function(d,c){if(e>=
d["in"]&&e<=d.out)a=c});e+=this.inOuts.ofVideos[a]["in"]-this.inOuts.ofClips[a]["in"];f.addTrackEvent(this.playlist[a],{start:e-1,end:e,_running:false,_natives:{start:b||f.nop,end:f.nop,type:"exec"}});return this},listen:function(e,b){var a=this,d=this.playlist,c=d.length,i=0;if(!b)b=f.nop;if(f.Events.Natives.indexOf(e)>-1)f.forEach(d,function(o){o.listen(e,function(l){l.active=a;if(k.indexOf(e)>-1)b.call(o,l);else++i===c&&b.call(o,l)})});else{this.events[e]||(this.events[e]={});d=b.name||f.guid("__"+
e);this.events[e][d]=b}return this},unlisten:function(){},trigger:function(e,b){var a=this;if(!(f.Events.Natives.indexOf(e)>-1)){this.events[e]&&f.forEach(this.events[e],function(d){d.call(a,{type:e},b)});return this}}});f.forEach(f.manifest,function(e,b){f.sequence.prototype[b]=function(a){var d={},c=[],i,o,l,q,r;for(i=0;i<this.inOuts.ofClips.length;i++){c=this.inOuts.ofClips[i];o=n(c["in"],c.out);l=o.indexOf(a.start);q=o.indexOf(a.end);if(l>-1)d[i]=f.extend({},c,{start:o[l],clipIdx:l});if(q>-1)d[i]=
f.extend({},c,{end:o[q],clipIdx:q})}i=Object.keys(d).map(function(t){return+t});c=n(i[0],i[1]);for(i=0;i<c.length;i++){l={};q=c[i];var s=d[q];if(s){r=this.inOuts.ofVideos[q];o=s.clipIdx;r=n(r["in"],r.out);if(s.start){l.start=r[o];l.end=r[r.length-1]}if(s.end){l.start=r[0];l.end=r[o]}}else{l.start=this.inOuts.ofVideos[q]["in"];l.end=this.inOuts.ofVideos[q].out}this.playlist[q][b](f.extend({},a,l))}return this}})})(this,Popcorn);(function(j,f){function h(b,a){if(b.currentStyle)return b.currentStyle[a];else if(f.getComputedStyle)return document.defaultView.getComputedStyle(b,null).getPropertyValue(a)}function p(b){return'<div><a href="'+b.user.profile+'"><img width="16px height="16px" src="'+b.user.avatar+'"></img>'+b.user.name+"</a> at "+function(a){var d=n(a/60);a=k(a%60);return d+"."+(a<10?"0":"")+a}(b.start)+" "+function(a){function d(c,i){return c+" "+i+(c>1?"s":"")+" ago"}a=((new Date).getTime()-a.getTime())/1E3;if(a<
60)return d(k(a),"second");a/=60;if(a<60)return d(k(a),"minute");a/=60;if(a<24)return d(k(a),"hour");a/=24;if(a<30)return d(k(a),"day");if(a<365)return d(k(a/30),"month");return d(k(a/365),"year")}(b.date)+"<br />"+b.text+"</span>"}function g(b){if(f.swfobject&&f.soundcloud){var a={enable_api:true,object_id:b._playerId,url:b.src,show_comments:!b._options.api.key&&!b._options.api.commentdiv},d={id:b._playerId,name:b._playerId},c=document.createElement("div");c.setAttribute("id",b._playerId);b._container.appendChild(c);
swfobject.embedSWF("http://player.soundcloud.com/player.swf",b._playerId,b.offsetWidth,b.height,"9.0.0","expressInstall.swf",a,{allowscriptaccess:"always",wmode:"transparent"},d)}else setTimeout(function(){g(b)},15)}var m=Math.abs,n=Math.floor,k=Math.round,e={};j.getScript("http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js");j.getScript("http://popcornjs.org/code/players/soundcloud/lib/soundcloud.player.api.js",function(){var b=1;soundcloud.addEventListener("onPlayerReady",function(a,
d){var c=e[a.api_getFlashId()];c.swfObj=a;c.duration=a.api_getTrackDuration();c.currentTime=a.api_getTrackPosition();c.volume=c.previousVolume=a.api_getVolume()/100;c._mediaId=d.mediaId;c.dispatchEvent("load");c.dispatchEvent("canplay");c.dispatchEvent("durationchange");c.timeupdate()});soundcloud.addEventListener("onMediaStart",function(a){a=e[a.api_getFlashId()];a.played=1;a.dispatchEvent("playing")});soundcloud.addEventListener("onMediaPlay",function(a){if(b)b=0;else e[a.api_getFlashId()].dispatchEvent("play")});
soundcloud.addEventListener("onMediaPause",function(a){e[a.api_getFlashId()].dispatchEvent("pause")});soundcloud.addEventListener("onMediaBuffering",function(a){a=e[a.api_getFlashId()];a.dispatchEvent("progress");if(a.readyState===0){a.readyState=3;a.dispatchEvent("readystatechange")}});soundcloud.addEventListener("onMediaDoneBuffering",function(a){e[a.api_getFlashId()].dispatchEvent("canplaythrough")});soundcloud.addEventListener("onMediaEnd",function(a){a=e[a.api_getFlashId()];a.paused=1;a.dispatchEvent("ended")});
soundcloud.addEventListener("onMediaSeek",function(a){var d=e[a.api_getFlashId()];d.setCurrentTime(a.api_getTrackPosition());d.paused&&d.dispatchEvent("timeupdate")});soundcloud.addEventListener("onPlayerError",function(a){e[a.api_getFlashId()].dispatchEvent("error")})});j.soundcloud=function(b,a,d){return new j.soundcloud.init(b,a,d)};j.soundcloud.init=function(){function b(a){var d=a._options,c=a._container,i=c.getBoundingClientRect();a.width=d.width||h(c,"width")||"100%";a.height=d.height||h(c,
"height")||"81px";a.src=d.src;a.autoplay=d.autoplay;if(parseFloat(a.height,10)!==81)a.height="81px";a.offsetLeft=i.left;a.offsetTop=i.top;a.offsetHeight=parseFloat(a.height,10);a.offsetWidth=parseFloat(a.width,10);if(/[\d]+%/.test(a.width)){d=h(c,"width");a._container.style.width=a.width;a.offsetWidth=a._container.offsetWidth;a._container.style.width=d}if(/[\d]+%/.test(a.height)){d=h(c,"height");a._container.style.height=a.height;a.offsetHeight=a._container.offsetHeight;a._container.style.height=
d}}return function(a,d,c){if(a)if(d){if(/file/.test(location.protocol))throw"Must run from a web server!";}else throw"Must supply a source!";else throw"Must supply an id!";if(!(this._container=document.getElementById(a)))throw"Could not find that container in the DOM!";c=c||{};c.api=c.api||{};c.target=a;c.src=d;c.api.commentformat=c.api.commentformat||p;this._mediaId=0;this._listeners={};this._playerId=j.guid(c.target);this._containerId=c.target;this._options=c;this._comments=[];this._popcorn=null;
b(this);this.duration=0;this.volume=1;this.ended=this.currentTime=0;this.paused=1;this.readyState=0;this.playbackRate=1;this.left=this.top=0;this.autoplay=null;this.played=0;this.addEventListener("load",function(){var i=this.getBoundingClientRect();this.top=i.top;this.left=i.left;this.offsetWidth=this.swfObj.offsetWidth;this.offsetHeight=this.swfObj.offsetHeight;this.offsetLeft=this.swfObj.offsetLeft;this.offsetTop=this.swfObj.offsetTop});e[this._playerId]=this;g(this)}}();j.soundcloud.init.prototype=
j.soundcloud.prototype;j.extend(j.soundcloud.prototype,{setVolume:function(b){if(!(!b&&b!==0)){if(b<0)b=-b;if(b>1)b%=1;this.volume=this.previousVolume=b;this.swfObj.api_setVolume(b*100);this.dispatchEvent("volumechange")}},setCurrentTime:function(b){if(!(!b&&b!==0)){this.currentTime=this.previousCurrentTime=b;this.ended=b>=this.duration;this.dispatchEvent("seeked")}},play:function(){if(this.swfObj){if(this.paused){this.paused=0;this.swfObj.api_play()}}else this.addEventListener("load",this.play)},
pause:function(){if(this.swfObj){if(!this.paused){this.paused=1;this.swfObj.api_pause()}}else this.addEventListener("load",this.pause)},mute:function(){if(this.swfObj)if(this.muted())if(this.paused)this.setVolume(this.oldVol);else this.volume=this.oldVol;else{this.oldVol=this.volume;if(this.paused)this.setVolume(0);else this.volume=0}else this.addEventListener("load",this.mute)},muted:function(){return this.volume===0},load:function(){if(this.swfObj){this.play();this.pause()}else this.addEventListener("load",
this.load)},addEventListener:function(b,a){this._listeners[b]||(this._listeners[b]=[]);this._listeners[b].push(a);return a},dispatchEvent:function(b){var a=this;b=b.type||b;b==="play"&&this.paused||b==="pause"&&!this.paused?this[b]():j.forEach(this._listeners[b],function(d){d.call(a)})},timeupdate:function(){var b=this,a=this.swfObj.api_getVolume()/100;if(m(this.currentTime-this.previousCurrentTime)>0.25)this.swfObj.api_seekTo(this.currentTime);else this.previousCurrentTime=this.currentTime=this.swfObj.api_getTrackPosition();
if(a!==this.previousVolume)this.setVolume(a);else this.volume!==this.previousVolume&&this.setVolume(this.volume);this.paused||this.dispatchEvent("timeupdate");b.ended||setTimeout(function(){b.timeupdate.call(b)},33)},getBoundingClientRect:function(){var b;if(this.swfObj){b=this.swfObj.getBoundingClientRect();return{bottom:b.bottom,left:b.left,right:b.right,top:b.top,width:b.width||b.right-b.left,height:b.height||b.bottom-b.top}}else{tmp=this._container.getBoundingClientRect();return{left:tmp.left,
top:tmp.top,width:this.offsetWidth,height:this.offsetHeight,bottom:tmp.top+this.width,right:tmp.top+this.height}}},registerPopcornWithPlayer:function(b){if(this.swfObj){this._popcorn=b;var a=this._options.api;if(a.key&&a.commentdiv){var d=this;j.xhr({url:"http://api.soundcloud.com/tracks/"+d._mediaId+"/comments.js?consumer_key="+a.key,success:function(c){j.forEach(c.json,function(i){d.addComment({start:i.timestamp/1E3,date:new Date(i.created_at),text:i.body,user:{name:i.user.username,profile:i.user.permalink_url,
avatar:i.user.avatar_url}})})}})}}else this.addEventListener("load",function(){this.registerPopcornWithPlayer(b)})}});j.extend(j.soundcloud.prototype,{addComment:function(b,a){var d=this,c={start:b.start||0,date:b.date||new Date,text:b.text||"",user:{name:b.user.name||"",profile:b.user.profile||"",avatar:b.user.avatar||""},display:function(){return(a||d._options.api.commentformat)(c)}};this._comments.push(c);this._popcorn&&this._popcorn.subtitle({start:c.start,target:this._options.api.commentdiv,
display:"inline",language:"en",text:c.display()})}})})(Popcorn,window);
